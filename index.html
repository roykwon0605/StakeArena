<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StakeArena</title>

  <!-- SEO / Social -->
  <meta name="description" content="StakeArena — high-risk, high-reward web game. Bet in the mines, fight the Titan, and climb the ranks!" />
  <meta property="og:title" content="StakeArena" />
  <meta property="og:description" content="Test your luck and courage. Bet, survive, and fight your way to glory in StakeArena!" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="og-image.png" />
  <meta name="theme-color" content="#0e1320" />

  <link rel="stylesheet" href="styles.css" />
  <script src="main.js" defer></script>
  <link rel="icon" href="icon.png" />
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <div class="brand">💥 StakeArena</div>
      <div class="bank">
        <span id="balance" class="pill">Balance: 0</span>
        <span class="badge" id="gearBadge">Sword 1 • Armor 1 • Luck 0</span>
        <span class="badge" id="rankBadge">Rank 0</span>
        <span class="badge" id="lastWin">Last +0</span>
      </div>
    </header>

    <nav class="nav">
      <button class="tab active" data-tab="mines">Mines</button>
      <button class="tab" data-tab="shop">Shop</button>
      <button class="tab" data-tab="boss">Arena</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <!-- ===== MINES ===== -->
    <main id="mines" class="content show">
      <section class="panel controls">
        <div class="row">
          <label class="lbl">Bet</label>
          <div class="betbox">
            <button class="mini" id="betDec">-</button>
            <input id="betInput" type="number" min="1" step="10" value="50" />
            <button class="mini" id="betInc">+</button>
            <button class="chip" id="betHalf">½</button>
            <button class="chip" id="betDouble">2×</button>
            <button class="chip" id="betMax">Max</button>
          </div>
        </div>
        <div class="row">
          <label class="lbl">Bombs</label>
          <input id="bombs" type="range" min="2" max="10" value="5" />
          <output id="bombsOut">5</output>
        </div>
        <div class="row actions">
          <button id="startBtn" class="cta">Start Round</button>
          <button id="cashoutBtn" class="ghost" disabled>Cash Out</button>
          <button id="resetBtn" class="ghost">Reset Board</button>
        </div>
        <div class="stats">
          <div>Reveals: <span id="reveals">0</span> / 25 — <span id="safeLeft">0</span> safe left</div>
          <div>Multiplier: <span id="mult">1.00×</span> • Potential: <span id="potential">0</span></div>
          <div class="tiny">🍀 Luck = 1-time 🛡 shield per round. It’s only consumed when it blocks a bomb.</div>
        </div>
      </section>
      <section class="panel board">
        <div id="grid" class="grid" aria-label="Mines grid"></div>
      </section>
    </main>

    <!-- ===== SHOP ===== -->
    <main id="shop" class="content">
      <section class="panel shop">
        <div class="item">
          <div class="meta">
            <strong>⚔️ Sword</strong>
            <small>Boosts Arena damage.</small>
            <small>Level: <span id="swordLvl">1</span></small>
          </div>
          <div>
            <span class="price" id="swordPrice">Cost: 250</span>
            <button id="buySword" class="cta">Buy</button>
          </div>
        </div>

        <div class="item">
          <div class="meta">
            <strong>🛡 Armor</strong>
            <small>Raises Arena max HP.</small>
            <small>Level: <span id="armorLvl">1</span></small>
          </div>
          <div>
            <span class="price" id="armorPrice">Cost: 200</span>
            <button id="buyArmor" class="cta">Buy</button>
          </div>
        </div>

        <div class="item">
          <div class="meta">
            <strong>🍀 Luck</strong>
            <small>1-use bomb shield in Mines. Only consumed when triggered.</small>
            <small>Owned: <span id="luckLvl">0</span></small>
          </div>
          <div>
            <span class="price" id="luckPrice">Cost: 300</span>
            <button id="buyLuck" class="cta">Buy</button>
          </div>
        </div>
      </section>
    </main>

    <!-- ===== ARENA (Challenge) ===== -->
    <main id="boss" class="content">
      <section class="panel boss-wrap">
        <h2>⚔️ Titan Challenge</h2>
        <p>Win to earn coins + rank. Titan gets tougher and faster every rank.</p>

        <!-- Titan Power Bar -->
        <div class="powerWrap">
          <div class="powerLabel">Titan Power</div>
          <div class="powerBar"><div id="powerFill"></div></div>
          <div id="powerPct" class="powerPct">100%</div>
        </div>

        <div class="boss-row">
          <button id="startFight" class="cta">Fight Titan</button>
          <span class="badge" id="bossInfo">—</span>
        </div>

        <div class="arena">
          <div class="side">
            <div class="avatar hero" id="heroSprite">🧝‍♂️</div>
            <div class="hp">
              <div>Hero</div>
              <div class="hpbar"><div id="hpHero"></div></div>
            </div>
          </div>

          <div class="side">
            <div class="avatar boss" id="bossSprite">🗿</div>
            <div class="hp">
              <div>Boss</div>
              <div class="hpbar"><div id="hpBoss"></div></div>
            </div>
          </div>
        </div>

        <div class="boss-row">
          <div class="timing">
            <div class="zone ok"></div>
            <div class="cursor" id="cursor"></div>
          </div>
          <button id="btnStrike" class="cta" disabled>Strike (Space)</button>
          <button id="btnFlee" class="ghost" disabled>Flee</button>
        </div>

        <div class="tiny">Tip: Hit the green zone for a perfect strike. Boss enrages over time.</div>
      </section>
    </main>

    <!-- ===== SETTINGS ===== -->
    <main id="settings" class="content">
      <section class="panel">
        <h2>Settings</h2>
        <p>Restart the entire game (resets balance, gear, rank, and interface).</p>
        <button id="restartAll" class="cta">Restart Game</button>
      </section>
    </main>

    <footer class="footer">
      <small>StakeArena — Mines build your coins • Arena is high risk. Space = Strike.</small>
    </footer>
  </div>

  <!-- Mines tile template -->
  <template id="tileTpl">
    <button class="tile" data-state="hidden" aria-label="Hidden tile"></button>
  </template>

  <!-- Win toast -->
  <div id="toast" class="toast"></div>

  <!-- In-game popup -->
  <div id="popup" class="popup">
    <div class="card small">
      <h3 id="popupTitle">Notice</h3>
      <p id="popupMsg"></p>
      <button id="popupOk" class="cta">OK</button>
    </div>
  </div>

  <!-- Game Over overlay -->
  <section id="gameOver" class="overlay">
    <div class="card">
      <h2>Game Over</h2>
      <p>You lost to Titan or your balance hit 0.</p>
      <p><b>Final Rank:</b> <span id="finalScore">Rank 0</span></p>
      <div class="row actions">
        <button id="restartBtn" class="cta">Restart</button>
      </div>
    </div>
  </section>
</body>
</html>
