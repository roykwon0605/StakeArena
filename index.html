<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>🥩 SteakArena</title>

  <!-- SEO / Social -->
  <meta name="description" content="SteakArena — grill the mines, fight the Giant Cow, and rain steaks!">
  <meta property="og:title" content="SteakArena" />
  <meta property="og:description" content="Bet, sizzle, and strike. Cook your way to glory in SteakArena!" />
  <meta name="theme-color" content="#6d2a35" />

  <!-- Steak emoji favicon (no file needed) -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ctext y='50' font-size='48'%3E%F0%9F%A5%A9%3C/text%3E%3C/svg%3E" />

  <link rel="stylesheet" href="styles.css" />
  <script defer src="main.js"></script>
</head>
<body>
  <div class="wrap">
    <header class="topbar">
      <div class="brand">🥩 SteakArena</div>
      <div class="bank">
        <span id="balance" class="pill">Steaks: 0</span>
        <span class="badge" id="gearBadge">Knife 1 • Apron 1 • Sauce 0 • Tongs 0</span>
        <span class="badge" id="rankBadge">Rank 0</span>
        <span class="badge" id="lastWin">Last +0</span>
      </div>
    </header>

    <nav class="nav">
      <button class="tab active" data-tab="mines">Grill Mines</button>
      <button class="tab" data-tab="shop">Butcher Shop</button>
      <button class="tab" data-tab="boss">Cow Arena</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <!-- ===== MINES ===== -->
    <main id="mines" class="content show">
      <section class="panel controls">
        <div class="row">
          <label class="lbl">Bet 🥩</label>
          <div class="betbox">
            <button class="mini" id="betDec">-</button>
            <input id="betInput" type="number" min="1" step="10" value="50" />
            <button class="mini" id="betInc">+</button>
            <button class="chip" id="betHalf">½</button>
            <button class="chip" id="betDouble">2×</button>
            <button class="chip" id="betMax">Max</button>
          </div>
        </div>
        <div class="row">
          <label class="lbl">Bombs</label>
          <input id="bombs" type="range" min="2" max="10" value="5" />
          <output id="bombsOut">5</output>
        </div>
        <div class="row actions">
          <button id="startBtn" class="cta">Start Round</button>
          <button id="cashoutBtn" class="ghost" disabled>Cash Out</button>
          <button id="resetBtn" class="ghost">Reset Board</button>
        </div>
        <div class="stats">
          <div>Reveals: <span id="reveals">0</span> / 25 — <span id="safeLeft">20</span> safe left</div>
          <div>Multiplier: <span id="mult">1.00×</span> • Potential: <span id="potential">0</span> 🥩</div>
          <div class="tiny">🍀 <b>Sauce of Fortune</b> = one-time 🛡 shield per round. Consumed only when it blocks a bomb.</div>
        </div>
      </section>
      <section class="panel board">
        <div id="grid" class="grid" aria-label="Mines grid"></div>
      </section>
    </main>

    <!-- ===== SHOP ===== -->
    <main id="shop" class="content">
      <section class="panel shop">
        <div class="item">
          <div class="meta">
            <strong>🔪 Steak Knife</strong>
            <small>Boosts Arena damage.</small>
            <small>Level: <span id="swordLvl">1</span></small>
          </div>
          <div>
            <span class="price" id="swordPrice">Cost: 250 🥩</span>
            <button id="buySword" class="cta">Buy</button>
          </div>
        </div>

        <div class="item">
          <div class="meta">
            <strong>🦺 Grill Apron</strong>
            <small>Raises Arena max HP.</small>
            <small>Level: <span id="armorLvl">1</span></small>
          </div>
          <div>
            <span class="price" id="armorPrice">Cost: 200 🥩</span>
            <button id="buyArmor" class="cta">Buy</button>
          </div>
        </div>

        <div class="item">
          <div class="meta">
            <strong>🍀 Sauce of Fortune</strong>
            <small>1-use bomb shield in Mines. Only consumed when triggered.</small>
            <small>Owned: <span id="luckLvl">0</span></small>
          </div>
          <div>
            <span class="price" id="luckPrice">Cost: 300 🥩</span>
            <button id="buyLuck" class="cta">Buy</button>
          </div>
        </div>

        <!-- NEW: ❄️ Chill Tongs -->
        <div class="item">
          <div class="meta">
            <strong>❄️ Chill Tongs</strong>
            <small>Slows the spatula cursor in Cow Arena.</small>
            <small>Level: <span id="chillLvl">0</span> (max 5)</small>
          </div>
          <div>
            <span class="price" id="chillPrice">Cost: 300 🥩</span>
            <button id="buyChill" class="cta">Buy</button>
          </div>
        </div>

      </section>
    </main>

    <!-- ===== ARENA (Challenge) ===== -->
    <main id="boss" class="content">
      <section class="panel boss-wrap">
        <h2>🐄 Giant Cow Arena</h2>
        <p>Sear your courage! Win to earn steaks + rank. The Cow gets tougher and faster every rank.</p>

        <!-- Grill Heat Bar -->
        <div class="powerWrap">
          <div class="powerLabel">Grill Heat</div>
          <div class="powerBar"><div id="powerFill"></div></div>
          <div id="powerPct" class="powerPct">100%</div>
        </div>

        <div class="boss-row">
          <button id="startFight" class="cta">Fight the Cow</button>
          <span class="badge" id="bossInfo">—</span>
        </div>

        <div class="arena">
          <div class="side">
            <div class="avatar hero" id="heroSprite">👨‍🍳</div>
            <div class="hp">
              <div>Chef</div>
              <div class="hpbar"><div id="hpHero"></div></div>
            </div>
          </div>

          <div class="side">
            <div class="avatar boss" id="bossSprite">🐄</div>
            <div class="hp">
              <div>Giant Cow</div>
              <div class="hpbar"><div id="hpBoss"></div></div>
            </div>
          </div>
        </div>

        <div class="boss-row">
          <div class="timing">
            <div class="zone ok"></div>
            <div class="cursor spatula" id="cursor"></div>
          </div>
          <button id="btnStrike" class="cta" disabled>Flip! (Space)</button>
          <button id="btnFlee" class="ghost" disabled>Flee</button>
        </div>

        <div class="tiny">Tip: Land the spatula in the green zone for a perfect flip. The Tongs upgrade slows the cursor.</div>
      </section>
    </main>

    <!-- ===== SETTINGS ===== -->
    <main id="settings" class="content">
      <section class="panel">
        <h2>Settings</h2>
        <p>Restart the entire game (resets steaks, gear, rank, and interface).</p>
        <button id="restartAll" class="cta">Restart Game</button>
      </section>
    </main>

    <footer class="footer">
      <small>SteakArena — Grill Mines fuel your steaks • Cow Arena is high risk. Space = Flip.</small>
    </footer>
  </div>

  <!-- Mines tile template -->
  <template id="tileTpl">
    <button class="tile" data-state="hidden" aria-label="Hidden tile"></button>
  </template>

  <!-- Win toast -->
  <div id="toast" class="toast"></div>

  <!-- In-game popup -->
  <div id="popup" class="popup">
    <div class="card small">
      <h3 id="popupTitle">Notice</h3>
      <p id="popupMsg"></p>
      <button id="popupOk" class="cta">OK</button>
    </div>
  </div>

  <!-- Game Over overlay (persists until Restart) -->
  <section id="gameOver" class="overlay">
    <div class="card">
      <h2>Game Over</h2>
      <p>Your steak got overcooked… or the Cow stomped you.</p>
      <p><b>Final Rank:</b> <span id="finalScore">Rank 0</span></p>
      <div class="row actions">
        <button id="restartBtn" class="cta">Restart</button>
      </div>
    </div>
  </section>

  <!-- Steak rain container -->
  <div id="steakRain" aria-hidden="true"></div>
</body>
</html>
